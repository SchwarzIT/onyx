//
// Default Grid Variants
//

// prettier-ignore
$gridVariants: (
//  NAME     BREAKPOINT  COLUMNS  GUTTER  MARGIN
    "2xs"    none        4        1rem    1rem,
    "xs"     577px       8        1rem    1rem,
    "sm"     769px       8        1.5rem  2rem,
    "md"     993px       12       1.5rem  4rem,
    "lg"     1441px      16       2rem    4rem,
    "xl"     1921px      16       2rem    4rem,
);

.onyx-grid {
  display: grid;
  grid-template-columns: repeat(var(--onyx-grid-columns), minmax(0, 1fr));
  gap: var(--onyx-grid-gutter);
  margin: var(--onyx-grid-margin);
  max-width: var(--onyx-grid-max-width, none);
}

@mixin gridBreakpointProperties($columns, $gutter, $margin) {
  :where(:root) {
    --onyx-grid-columns: #{$columns};
    --onyx-grid-gutter: #{$gutter};
    --onyx-grid-margin: #{$margin};
  }
}

@each $name, $breakpoint, $columns, $gutter, $margin in $gridVariants {
  @if $breakpoint == "none" {
    @include gridBreakpointProperties($columns, $gutter, $margin);
  } @else {
    @media screen and (min-width: $breakpoint) {
      @include gridBreakpointProperties($columns, $gutter, $margin);
    }
  }
}

//
// Grid variants with max width
//

// prettier-ignore
$gridMaxVariants: (
//  NAME  MAX-WIDTH
    "md"  1440px,
    "lg"  1920px,
);

@each $name, $maxWidth in $gridMaxVariants {
  .onyx-grid-max-#{$name} {
    --onyx-grid-max-width: #{$maxWidth};
  }
}

//
// Alternative grid variants
//

.onyx-grid-xl-20 {
  --onyx-grid-columns: 20;
}

//
// Grid elements
//

@for $i from 1 through 20 {
  .onyx-grid-span-#{$i} {
    grid-column-end: span $i;
  }
}

@mixin gridBreakpointSpan($name, $breakpoint, $span) {
  @media screen and (min-width: $breakpoint) {
    .onyx-grid-#{$name}-span-#{$span} {
      grid-column-end: span $span;
    }
  }
}

@each $name, $breakpoint, $columns, $gutter, $margin in $gridVariants {
  @for $i from 1 through $columns {
    @include gridBreakpointSpan($name, $breakpoint, $i);
  }

  @if $name == "xl" {
    @for $i from 17 through 20 {
      @include gridBreakpointSpan($name, $breakpoint, $i);
    }
  }
}
